---
pagination:
  data: characters
  size: 1
  alias: character
permalink: "/characters/{{ character.name | slug }}/"
layout: layout.njk
---

<section class="container mx-auto px-4 py-8">
<div class="max-w-2xl mx-auto p-6 bg-gray-100 rounded-lg shadow-lg">
  <!-- Name Banner -->
  <div class="text-center mb-6">
    <h1 class="text-8xl font-extrabold tracking-wide text-indigo-700 bg-indigo-100 py-2 rounded-t-lg">{{ character.name }}</h1>
  </div>

  <!-- Character Info Table -->
  <div class="grid grid-cols-2 gap-4 mb-6">
  <div class="font-semibold text-gray-700 font-dynapuff uppercase text-2xl">Background:</div>
  <div class="text-blue-600 font-gaegu text-2xl">{{ character.background }}</div>
  <div class="font-semibold text-gray-700 font-dynapuff uppercase text-2xl">Species:</div>
  <div class="text-green-600 font-gaegu text-2xl">{{ character.species }}</div>
  <div class="font-semibold text-gray-700 font-dynapuff uppercase text-2xl">Class:</div>
  <div class="text-purple-600 font-gaegu text-2xl">{{ character.class }}</div>
  <div class="font-semibold text-gray-700 font-dynapuff uppercase text-2xl">Subclass:</div>
  <div class="text-pink-600 font-gaegu text-2xl">{{ character.subclass }}</div>
  </div>

  {% set abilities = dndStats.abilities %}
  {% include "statSections/ability-scores.njk" %}

  <!-- Heroic Inspiration -->
  <div class="border rounded-lg p-4 mb-6 bg-yellow-50">
    <div class="text-lg font-bold text-yellow-700 mb-2">Heroic Inspiration</div>
    <div class="text-gray-700">{{ character.heroicInspiration }}</div>
  </div>

  <!-- Snapshots -->
  {% set snapshots = snapshotsIndex[character._slug] if snapshotsIndex and character._slug in snapshotsIndex else null %}
  {% if snapshots %}
  <div class="border rounded-lg p-4 mb-6 bg-blue-50">
    <div class="text-lg font-bold text-blue-700 mb-2">Snapshots</div>
    <div class="text-gray-700">View historical snapshots for this character:</div>
    <div class="mt-2 flex gap-2">
      <a href="levels/" class="px-3 py-1 bg-white border rounded">All snapshots</a>
      {% for lv in snapshots %}
        <a href="levels/{{ lv }}/" class="px-3 py-1 bg-white border rounded">Level {{ lv }}</a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Equipment Training & Proficiencies -->
  <div class="border rounded-lg p-4 bg-gray-50">
    <div class="text-lg font-bold text-gray-800 mb-2">Equipment Training & Proficiencies</div>
    <table class="w-full text-sm">
      <tr>
        <td class="font-semibold">Armor</td>
        <td>{{ character.equipment.armor }}</td>
      </tr>
      <tr>
        <td class="font-semibold">Weapons</td>
        <td>{{ character.equipment.weapons }}</td>
      </tr>
      <tr>
        <td class="font-semibold">Tools</td>
        <td>{{ character.equipment.tools }}</td>
      </tr>
      <tr>
        <td class="font-semibold">Packs</td>
        <td>{{ character.equipment.packs }}</td>
      </tr>
    </table>
  </div>
</div>
  {% set effectiveLevel = character.level %}
  {% if not effectiveLevel and character.classes and character.classes[0] %}
    {% set effectiveLevel = character.classes[0].levels %}
  {% endif %}
  <p class="mb-2"><strong>Level:</strong> {{ effectiveLevel }}</p>
  <p class="mb-2"><strong>Background:</strong> {{ character.background }}</p>
  <p class="mb-2"><strong>Alignment:</strong> {{ character.alignment }}</p>
  <h2 class="text-xl font-semibold mt-6 mb-2">Abilities</h2>
  <ul>
    {% for ability in dndStats.abilities %}
      {% set val = character[ability.key] %}
      {% if val %}
        <li>{{ ability.label }}: {{ val.score }} ({{ val.mod }})</li>
      {% else %}
        <li>{{ ability.label }}: —</li>
      {% endif %}
    {% endfor %}
  </ul>
  <h2 class="text-xl font-semibold mt-6 mb-2">Skills</h2>
  <ul>
    {% for ability in dndStats.abilities %}
      {% set val = character[ability.key] %}
      {% if val and val.skills %}
        {% for skill in val.skills %}
          <li>{{ skill.name }} {{ skill.mod or '' }} {% if skill.proficient %}★{% endif %}{% if skill.expert %} ✦{% endif %}</li>
        {% endfor %}
      {% endif %}
    {% endfor %}
  </ul>
  <h2 class="text-xl font-semibold mt-6 mb-2">Skill Modifiers</h2>
  <ul>
    {% for ability in dndStats.abilities %}
      {% set val = character[ability.key] %}
      {% if val and val.skills %}
        {% for skill in val.skills %}
          <li>{{ skill.name }}: {{ skill.mod }}</li>
        {% endfor %}
      {% endif %}
    {% endfor %}
  </ul>
  <h2 class="text-xl font-semibold mt-6 mb-2">Equipment</h2>
  <ul>
    {% for item in character.equipment %}
      <li>{{ item }}</li>
    {% endfor %}
  </ul>
  <h2 class="text-xl font-semibold mt-6 mb-2">Spells</h2>
    <ul>
      <li><strong>Cantrips:</strong> {% for spell in character.spells.cantrips %}{{ spell }}{% if not loop.last %}, {% endif %}{% endfor %}</li>
      <li><strong>Level 1:</strong> {% for spell in character.spells.level1 %}{{ spell }}{% if not loop.last %}, {% endif %}{% endfor %}</li>
    </ul>
</section>
